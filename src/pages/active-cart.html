<!-- meta tags and other links -->
@@include('../partial/_template-top.html')

<header class="header-section">
  <div class="container">
    <div class="header-wrapper">
      <button class="menu-toggler btn btn-icon">
        <img src="assets/images/icons/menu-01.svg" alt="menu toggle" />
      </button>
      <div class="d-flex flex-column align-items-center justify-content-center">
        <h1 class="menu-title">Active Cart</h1>
        <span class="menu-subtitle">Group Order Code: A51C</span>
      </div>
      <button class="btn btn-icon">
        <img src="assets/images/icons/share.svg" alt="menu toggle" />
      </button>
    </div>
  </div>
</header>

<nav class="menu-wrapper">
  <div class="logo-area">
    <img src="assets/images/logo.svg" alt="logo" />
  </div>
  <div class="links-area">
    <div class="link-title">Group Ordering <span class="line"></span></div>
    <ul class="menu-links">
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5.84521 13.3357H9.17857M5.84521 9.17108H12.5119" stroke="#212121" stroke-width="1.5" stroke-linecap="round" />
            <path d="M8.34521 18.3333H9.17855" stroke="#212121" stroke-width="1.5" stroke-linecap="round" />
            <path d="M6.25905 18.3333C5.2827 18.3124 4.61603 18.25 3.9702 18.0626C3.09578 17.8335 2.45756 17.0631 2.2702 15.9803C2.0327 14.9599 2.11603 12.4403 2.09515 9.44184C2.09688 7.11563 1.99102 4.88157 2.36602 3.61136C2.59519 3.19489 2.78269 1.67481 5.88686 1.69564C6.4077 1.67481 11.9285 1.63316 12.8035 1.71645C15.7202 1.77893 16.0119 3.27819 16.1785 4.69416C16.2842 5.73531 16.2619 7.40116 16.2619 9.17109M5.8452 1.67481C6.0952 3.02831 6.07436 3.90288 6.99103 4.11111C7.38686 4.17358 8.29127 4.17191 9.26185 4.17358C10.1282 4.17507 11.0119 4.18289 11.4077 4.09029C12.3869 3.86124 12.2827 2.65349 12.5327 1.67481" stroke="#212121" stroke-width="1.5" stroke-linecap="round" />
            <path d="M15.2322 11.9823C14.0871 13.1483 11.8802 15.2307 11.8802 15.3764C11.7022 15.6236 11.5471 16.126 11.443 16.834C11.3122 17.4903 11.1557 18.0626 11.3389 18.2292C11.5222 18.3958 12.2121 18.2553 12.942 18.1043C13.5249 18.0418 14.0662 17.8335 14.3369 17.6253C14.7325 17.2753 17.4182 14.5643 17.7305 14.2103C17.9595 13.898 17.9803 13.3149 17.7804 12.9609C17.668 12.7111 16.9602 12.0447 16.7312 11.8573C16.3147 11.6074 15.7318 11.5658 15.2322 11.9823Z" stroke="#212121" stroke-width="1.5" stroke-linecap="round" />
          </svg>
          <span>Start Group Order</span>
        </a>
      </li>
    </ul>

    <div class="link-title">Info <span class="line"></span></div>
    <ul class="menu-links">
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16.6666 14.9998V8.33312C16.6666 6.76177 16.6666 5.97609 16.1785 5.48794C15.6903 4.99979 14.9046 4.99979 13.3333 4.99979H3.33331V14.9998C3.33331 16.5712 3.33331 17.3568 3.82147 17.845C4.30962 18.3332 5.0953 18.3332 6.66665 18.3332H13.3333C14.9046 18.3332 15.6903 18.3332 16.1785 17.845C16.6666 17.3568 16.6666 16.5712 16.6666 14.9998Z" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M10 9.1665C11.3808 9.1665 12.5 10.2857 12.5 11.6665M10 9.1665C8.61927 9.1665 7.50002 10.2857 7.50002 11.6665M10 9.1665V8.33313M12.5 11.6665H7.50002M12.5 11.6665H13.3334M7.50002 11.6665H6.66669" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M6.66669 14.9998H13.3334" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M3.33331 4.99981L9.48715 2.42136C10.8614 1.84557 11.5485 1.55768 12.0957 1.70433C12.4506 1.79943 12.7644 2.00975 12.9882 2.30261C13.3333 2.75425 13.3333 3.50276 13.3333 4.99981" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>

          <span>Menu Walkthrough</span>
        </a>
      </li>
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.99996 18.3333C14.6023 18.3333 18.3333 14.6024 18.3333 9.99999C18.3333 5.39762 14.6023 1.66666 9.99996 1.66666C5.39759 1.66666 1.66663 5.39762 1.66663 9.99999C1.66663 14.6024 5.39759 18.3333 9.99996 18.3333Z" stroke="#212121" stroke-width="1.5" />
            <path d="M10 6.66666V9.99999L11.6667 11.6667" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>View Hours</span>
        </a>
      </li>
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.5 10V14.1667M2.5 14.1667H4.16667C5.34517 14.1667 5.93443 14.1667 6.30055 14.5328C6.66667 14.8989 6.66667 15.4882 6.66667 16.6667V17.5M2.5 14.1667V17.5" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M3.33337 5.83333L7.76397 3.40287C8.86121 2.80096 9.40987 2.5 10 2.5C10.5902 2.5 11.1389 2.80096 12.2361 3.40287L16.6667 5.83333" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M15 5V8.33333M5 5V8.33333" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M17.5 10V14.1667M17.5 14.1667H15.8334C14.6549 14.1667 14.0656 14.1667 13.6995 14.5328C13.3334 14.8989 13.3334 15.4882 13.3334 16.6667V17.5M17.5 14.1667V17.5" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M5.83337 11.6667H10M10 11.6667H14.1667M10 11.6667V17.5M10 17.5H9.16671M10 17.5H10.8334" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>About Restaurant</span>
        </a>
      </li>
    </ul>

    <div class="link-title">MyServ <span class="line"></span></div>
    <ul class="menu-links">
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 15.8333H10.0083" stroke="#212121" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M11.25 1.66669H8.75004C6.78586 1.66669 5.80377 1.66669 5.19357 2.27688C4.58337 2.88708 4.58337 3.86917 4.58337 5.83335V14.1667C4.58337 16.1309 4.58337 17.1129 5.19357 17.7232C5.80377 18.3334 6.78586 18.3334 8.75004 18.3334H11.25C13.2142 18.3334 14.1963 18.3334 14.8065 17.7232C15.4167 17.1129 15.4167 16.1309 15.4167 14.1667V5.83335C15.4167 3.86917 15.4167 2.88708 14.8065 2.27688C14.1963 1.66669 13.2142 1.66669 11.25 1.66669Z" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>About MyServ</span>
        </a>
      </li>
    </ul>
  </div>

  <a href="" class="btn btn-primary btn-lg d-flex login-btn">Login</a>
</nav>

<main class="main-wrapper">
  <div class="container">
    <div class="cart-items-wrapper">
      <div class="cart-item">
        <div class="cart-item__thumb">
          <img src="assets/images/thumbs/img2.png" alt="thumb" />
        </div>
        <div class="cart-item__content">
          <h3 class="title">Deluxe Cheeseburger</h3>
          <div class="price">$16.00</div>
        </div>
        <div class="counter">
          <button class="btn p-0 border-0 minus2"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
          <input type="text" class="value bg-transparent" value="1" />
          <button class="btn p-0 border-0 plus2"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
        </div>
      </div>
      <div class="cart-item">
        <div class="cart-item__thumb">
          <img src="assets/images/thumbs/img4.png" alt="thumb" />
        </div>
        <div class="cart-item__content">
          <h3 class="title">Chocolate Lava Cake</h3>
          <div class="price">$8.00</div>
        </div>
        <div class="counter">
          <button class="btn p-0 border-0 minus2"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
          <input type="text" class="value bg-transparent" value="1" />
          <button class="btn p-0 border-0 plus2"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
        </div>
      </div>
      <div class="cart-item">
        <div class="cart-item__thumb">
          <img src="assets/images/thumbs/img16.png" alt="thumb" />
        </div>
        <div class="cart-item__content">
          <h3 class="title">Shishito Peppers</h3>
          <div class="price">$6.00</div>
        </div>
        <div class="counter">
          <button class="btn p-0 border-0 minus2"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
          <input type="text" class="value bg-transparent" value="1" />
          <button class="btn p-0 border-0 plus2"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
        </div>
      </div>

      <div class="text-center mt-4">
        <a href="" class="btn add-more-item-btn">
          <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.5 2.66666V13.3333" stroke="#2DA0ED" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M3.16663 8H13.8333" stroke="#2DA0ED" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span class="ms-2">Add more items</span>
        </a>
      </div>
    </div>
  </div>
</main>

<!-- notification -->
<div class="floating-notification">
  <div class="floating-notification__icon">
    <img src="assets/images/icons/check.svg" alt="icon" />
  </div>
  <div class="floating-notification__content">
    <span class="title">1 item removed</span>
    <button class="undo-btn btn py-0 border-0">Undo</button>
  </div>
</div>

<div class="container mt-auto bottom-button-wrapper">
  <div class="d-flex flex-column gap-2">
    <button type="button" class="btn btn-md btn-primary add-to-cart-btn">
      Place Order
      <span>$30.00</span>
    </button>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const cartWrapper = document.querySelector(".cart-items-wrapper");
    const notification = document.querySelector(".floating-notification");
    const undoBtn = document.querySelector(".undo-btn");
    const totalDisplay = document.querySelector(".add-to-cart-btn span");

    let lastRemoved = null;

    function parsePrice(text) {
      return parseFloat(text.replace(/[^0-9.]/g, "")) || 0;
    }

    function updateTotal() {
      let total = 0;
      document.querySelectorAll(".cart-item").forEach((item) => {
        const priceEl = item.querySelector(".price");
        const input = item.querySelector(".value");
        if (priceEl && input) {
          const price = parsePrice(priceEl.textContent);
          const qty = parseInt(input.value) || 0;
          total += price * qty;
        }
      });
      totalDisplay.textContent = `$${total.toFixed(2)}`;
    }

    function showNotification(itemTitle) {
      notification.querySelector(".title").textContent = `${itemTitle} removed`;
      notification.classList.add("show");
      setTimeout(() => {
        notification.classList.remove("show");
      }, 4000);
    }

    function attachEvents(cartItem) {
      const minusBtn = cartItem.querySelector(".minus2");
      const plusBtn = cartItem.querySelector(".plus2");
      const input = cartItem.querySelector(".value");

      minusBtn?.addEventListener("click", () => {
        let qty = parseInt(input.value) || 1;
        qty = Math.max(0, qty - 1);
        input.value = qty;

        if (qty === 0) {
          lastRemoved = {
            element: cartItem,
            index: [...cartWrapper.children].indexOf(cartItem),
            html: cartItem.outerHTML,
          };
          const title = cartItem.querySelector(".title")?.textContent || "Item";
          cartItem.remove();
          showNotification(title);
        }

        updateTotal();
      });

      plusBtn?.addEventListener("click", () => {
        let qty = parseInt(input.value) || 1;
        input.value = qty + 1;
        updateTotal();
      });
    }

    // Initial attach
    document.querySelectorAll(".cart-item").forEach(attachEvents);
    updateTotal();

    undoBtn?.addEventListener("click", () => {
      if (lastRemoved) {
        const temp = document.createElement("div");
        temp.innerHTML = lastRemoved.html;
        const restoredItem = temp.firstElementChild;
        const children = [...cartWrapper.children];
        const index = lastRemoved.index;

        if (index >= children.length) {
          cartWrapper.appendChild(restoredItem);
        } else {
          cartWrapper.insertBefore(restoredItem, children[index]);
        }

        attachEvents(restoredItem);
        lastRemoved = null;
        notification.classList.remove("show");
        updateTotal();
      }
    });
  });
</script>

@@include('../partial/_template-bottom.html')
