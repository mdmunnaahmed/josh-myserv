<!-- meta tags and other links -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MyServ: Empowering the Dining Experience</title>
    <link rel="icon" type="image/png" href="assets/images/favicon.png" sizes="16x16" />
    <!-- bootstrap 5  -->
    <link rel="stylesheet" href="assets/css/lib/bootstrap.min.css" />
    <!-- Icon Link  -->
    <link rel="stylesheet" href="assets/css/all.min.css" />
    <link rel="stylesheet" href="assets/css/lib/animate.css" />

    <!-- Main css -->
    <link rel="stylesheet" href="assets/css/main.css" />
</head>

<body>
    <!-- Overlay -->
    <div class="overlay"></div>

<main class="main-wrapper">
  <div class="single-page-wrapper">
    <div class="single-page-inner pb-0">
      <div class="title-wrapper">
        <a href="./active-cart.html" class="back-btn"><img src="assets/images/icons/arrow-left.svg" alt="icon" /></a>
        <h2 class="title">Payment Pre-Authorization</h2>
        <span style="width: 24px"></span>
      </div>
      <div class="image-content text-center">
        <img src="assets/images/thumbs/img12.png" alt="thumb" class="mb-3" />
        <p>To ensure fair transactions, a pre-authorization is now required for all MyServ orders. This temporary hold ensures payment and any extra funds will be promptly refunded.</p>
        <p>If desired, you can change your payment method before finalizing your tab when you're ready to leave!</p>
      </div>

      <label class="payment-option" data-modal="applePayModal">
        <label for="applePay">
          <img src="assets/images/icons/apple.svg" alt="icon" />
          <div>
            <h3 class="title">Apple Pay</h3>
          </div>
        </label>
        <input type="radio" name="doneness" id="applePay" />
      </label>
      <label class="payment-option" data-modal="googlePayModal">
        <label for="gPay">
          <img src="assets/images/icons/google.svg" alt="icon" />
          <div>
            <h3 class="title">Google Pay</h3>
          </div>
        </label>
        <input type="radio" name="doneness" id="gPay" checked />
      </label>
      <label class="payment-option" data-modal="addCardModal">
        <label for="masterCard">
          <img src="assets/images/icons/card.png" alt="icon" class="rounded-3" width="40px" />
          <div>
            <h3 class="title">Credit / Debit Card</h3>
          </div>
        </label>
        <input type="radio" name="doneness" id="masterCard" />
      </label>
    </div>
  </div>
</main>

<div class="container mt-auto bottom-button-wrapper">
  <div class="d-flex flex-column gap-2">
    <a href="" class="btn btn-md btn-primary">Pay</a>
  </div>
</div>

<!-- Apple Pay Card Modal -->
<div class="single-page-wrapper custom-modal" id="applePayModal">
  <div class="single-page-inner pt-3">
    <div class="title-wrapper align-items-center">
      <img src="assets/images/icons/apple-pay.svg" alt="logo" />
      <button class="btn p-0 border-0 modal-close"><img src="assets/images/icons/close-btn.svg" alt="icon" /></button>
    </div>
    <div class="apple-card mt-3">
      <div class="apple-card__left">
        <img src="assets/images/icons/card2.png" alt="icon" />
        <h3 class="title">Apple Card</h3>
      </div>
      <div class="apple-card__right">
        <a href="" class="py-1 px-2"><img src="assets/images/icons/arrow-right.svg" alt="icon" /></a>
      </div>
    </div>
    <div class="apple-card style--two mt-3">
      <div class="apple-card__left">
        <p>Pay Green Line Restaurant</p>
        <h3 class="title">$89.60</h3>
      </div>
      <div class="apple-card__right">
        <a href="" class="p-1"><img src="assets/images/icons/arrow-right.svg" alt="icon" /></a>
      </div>
    </div>
    <div class="apple-card style--three">
      <div class="apple-card__left">
        <img src="assets/images/icons/side-btn.svg" alt="icon" />
        <h3 class="title">Confirm with Side Button</h3>
      </div>
    </div>
  </div>
</div>
<!-- Apple Pay Card Modal -->

<!-- Google Pay Card Modal -->
<div class="single-page-wrapper custom-modal" id="googlePayModal">
  <div class="single-page-inner pt-3">
    <div class="title-wrapper align-items-center">
      <div class="d-flex gap-1 align-items-center"><img src="assets/images/icons/g.svg" alt="logo" /> <span class="pay">Pay</span></div>
      <button class="btn p-0 border-0 modal-close"><img src="assets/images/icons/close-btn.svg" alt="icon" /></button>
    </div>
    <div class="apple-card mt-3">
      <div class="apple-card__left">
        <img src="assets/images/icons/g.svg" alt="icon" />
        <h3 class="title">Google Card</h3>
      </div>
      <div class="apple-card__right">
        <a href="" class="py-1 px-2"><img src="assets/images/icons/arrow-right.svg" alt="icon" /></a>
      </div>
    </div>
    <div class="apple-card style--two mt-3">
      <div class="apple-card__left">
        <p>Pay Green Line Restaurant</p>
        <h3 class="title">$89.60</h3>
      </div>
      <div class="apple-card__right">
        <a href="" class="p-1"><img src="assets/images/icons/arrow-right.svg" alt="icon" /></a>
      </div>
    </div>
    <div class="apple-card style--three">
      <div class="apple-card__left">
        <img src="assets/images/icons/side-btn.svg" alt="icon" />
        <h3 class="title">Confirm with Side Button</h3>
      </div>
    </div>
  </div>
</div>
<!-- Google Pay Card Modal -->

<!-- Add Card Modal -->
<div class="single-page-wrapper custom-modal" id="addCardModal">
  <div class="single-page-inner pt-3 pb-3">
    <div class="title-wrapper">
      <button class="back-btn modal-close"><img src="assets/images/icons/arrow-left.svg" alt="icon" /></button>
      <h2 class="title">Add Card</h2>
      <span style="width: 24px"></span>
    </div>
    <form action="./start-group-order.html" class="add-card-form mt-4">
      <!-- Card Holder Name: No numbers -->
      <div class="form-group mb-3">
        <img src="assets/images/icons/user.svg" alt="icon" />
        <input type="text" class="form-control" placeholder="Card Holder Name" id="cardholder" />
      </div>

      <!-- Credit Card Number: Digits only -->
      <div class="form-group mb-3">
        <img src="assets/images/icons/credit-card.svg" alt="icon" />
        <input type="tel" class="form-control" placeholder="Credit Card Number" id="card-number" maxlength="19" />
      </div>

      <div class="row gy-3">
        <!-- CVV: Digits only -->
        <div class="col-6">
          <div class="form-group">
            <img src="assets/images/icons/square-lock-01.svg" alt="icon" />
            <input type="tel" class="form-control" placeholder="CVV" id="cvv" maxlength="4" />
          </div>
        </div>

        <!-- Expiration Date: Format MM/YY -->
        <div class="col-6">
          <div class="form-group">
            <img src="assets/images/icons/credit-card.svg" alt="icon" />
            <input type="text" class="form-control" placeholder="Exp. Date XX/XX" id="expiry" maxlength="5" />
          </div>
        </div>
      </div>

      <div class="d-flex flex-column gap-2 mt-4 pt-3">
        <button type="submit" class="btn btn-md btn-primary">Confirm</button>
      </div>
    </form>

    <script>
      // Cardholder name: allow only letters
      const cardholder = document.getElementById("cardholder");
      if (cardholder) {
        cardholder.addEventListener("input", function () {
          this.value = this.value.replace(/[0-9]/g, "");
        });
      }

      // Card number formatting
      const cardInput = document.getElementById("card-number");
      if (cardInput) {
        cardInput.addEventListener("input", function () {
          let digits = this.value.replace(/\D/g, "").substring(0, 16);
          this.value = digits.replace(/(.{4})/g, "$1 ").trim();
        });
      }

      // CVV digits only
      const cvv = document.getElementById("cvv");
      if (cvv) {
        cvv.addEventListener("input", function () {
          this.value = this.value.replace(/\D/g, "");
        });
      }

      // Expiry date with proper backspace handling
      const expiry = document.getElementById("expiry");
      if (expiry) {
        expiry.addEventListener("input", function (e) {
          let digits = this.value.replace(/\D/g, "").substring(0, 4);

          // Preserve cursor position
          const isDeleting = e.inputType === "deleteContentBackward";

          if (isDeleting && this.value.endsWith("/")) {
            // Handle deletion of slash
            digits = digits.slice(0, -1);
          }

          if (digits.length >= 3) {
            this.value = digits.slice(0, 2) + "/" + digits.slice(2);
          } else if (digits.length >= 2) {
            this.value = digits + "/";
          } else {
            this.value = digits;
          }
        });
      }
    </script>
  </div>
</div>
<!-- Add Card Modal -->

<!-- jQuery library -->
<script src="assets/js/lib/jquery-3.7.1.min.js"></script>
<!-- bootstrap js -->
<script src="assets/js/lib/bootstrap.min.js"></script>
<!-- main js -->
<script src="assets/js/main.js"></script>
</body>

</html>
