<!-- meta tags and other links -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MyServ: Empowering the Dining Experience</title>
    <link rel="icon" type="image/png" href="assets/images/favicon.png" sizes="16x16" />
    <!-- bootstrap 5  -->
    <link rel="stylesheet" href="assets/css/lib/bootstrap.min.css" />
    <!-- Icon Link  -->
    <link rel="stylesheet" href="assets/css/all.min.css" />
    <link rel="stylesheet" href="assets/css/lib/animate.css" />

    <!-- Main css -->
    <link rel="stylesheet" href="assets/css/main.css" />
</head>

<body>
    <!-- Overlay -->
    <div class="overlay"></div>

<main class="main-wrapper">
  <div class="single-page-wrapper">
    <div class="single-page-inner pb-0">
      <div class="title-wrapper">
        <a href="./active-cart.html" class="back-btn"><img src="assets/images/icons/arrow-left.svg" alt="icon" /></a>
        <h2 class="title">Payment Pre-Authorization</h2>
        <span style="width: 24px"></span>
      </div>
      <div class="image-content text-center">
        <img src="assets/images/thumbs/img12.png" alt="thumb" class="mb-3" />
        <p>To ensure fair transactions, a pre-authorization is now required for all MyServ orders. This temporary hold ensures payment and any extra funds will be promptly refunded.</p>
        <p>If desired, you can change your payment method before finalizing your tab when you're ready to leave!</p>
      </div>

      <label class="payment-option">
        <label for="applePay">
          <img src="assets/images/icons/apple.svg" alt="icon" />
          <div>
            <h3 class="title">Apple Pay</h3>
          </div>
        </label>
        <input type="radio" name="doneness" id="applePay" />
      </label>
      <label class="payment-option">
        <label for="gPay">
          <img src="assets/images/icons/google.svg" alt="icon" />
          <div>
            <h3 class="title">Google Pay</h3>
          </div>
        </label>
        <input type="radio" name="doneness" id="gPay" checked />
      </label>
      <label class="payment-option" data-modal="addCardModal">
        <label for="masterCard">
          <img src="assets/images/icons/card.svg" alt="icon" />
          <div>
            <h3 class="title">Credit / Debit Card</h3>
          </div>
        </label>
        <input type="radio" name="doneness" id="masterCard" />
      </label>
    </div>
  </div>
</main>

<div class="container mt-auto bottom-button-wrapper">
  <div class="d-flex flex-column gap-2">
    <a href="" class="btn btn-md btn-primary">Pay</a>
  </div>
</div>

<!-- Add Card Modal -->
<div class="single-page-wrapper custom-modal" id="addCardModal">
  <div class="single-page-inner pt-3 pb-3">
    <div class="title-wrapper">
      <button class="back-btn modal-close"><img src="assets/images/icons/arrow-left.svg" alt="icon" /></button>
      <h2 class="title">Add Card</h2>
      <span style="width: 24px"></span>
    </div>
    <form action="" class="add-card-form mt-4">
      <!-- Card Holder Name: No numbers -->
      <div class="form-group mb-3">
        <img src="assets/images/icons/user.svg" alt="icon" />
        <input type="text" class="form-control" placeholder="Card Holder Name" id="cardholder" />
      </div>

      <!-- Credit Card Number: Digits only -->
      <div class="form-group mb-3">
        <img src="assets/images/icons/credit-card.svg" alt="icon" />
        <input type="tel" class="form-control" placeholder="Credit Card Number" id="card-number" maxlength="19" />
      </div>

      <div class="row gy-3">
        <!-- CVV: Digits only -->
        <div class="col-6">
          <div class="form-group">
            <img src="assets/images/icons/square-lock-01.svg" alt="icon" />
            <input type="tel" class="form-control" placeholder="CVV" id="cvv" maxlength="4" />
          </div>
        </div>

        <!-- Expiration Date: Format MM/YY -->
        <div class="col-6">
          <div class="form-group">
            <img src="assets/images/icons/credit-card.svg" alt="icon" />
            <input type="text" class="form-control" placeholder="Exp. Date" id="expiry" maxlength="5" />
          </div>
        </div>
      </div>

      <div class="d-flex flex-column gap-2 mt-4 pt-3">
        <button type="submit" class="btn btn-md btn-primary">Confirm</button>
      </div>
    </form>

    <script>
      // Restrict cardholder name to letters only
      document.getElementById("cardholder").addEventListener("input", function () {
        this.value = this.value.replace(/[0-9]/g, "");
      });

      // Allow only numbers in card number and CVV
      const cardInput = document.getElementById("card-number");
      cardInput.addEventListener("input", function () {
        // Remove all non-digit characters
        let digits = this.value.replace(/\D/g, "");

        // Limit to 16 digits
        digits = digits.substring(0, 16);

        // Group into 4s and join with spaces
        let formatted = digits.replace(/(.{4})/g, "$1 ").trim();

        this.value = formatted;
      });

      document.getElementById("cvv").addEventListener("input", function () {
        this.value = this.value.replace(/\D/g, "");
      });

      // Format expiry date to MM/YY and restrict to numbers
      document.getElementById("expiry").addEventListener("input", function (e) {
        let input = this.value.replace(/\D/g, ""); // Remove non-digits
        if (input.length > 2) {
          input = input.slice(0, 2) + "/" + input.slice(2, 4);
        }
        this.value = input;
      });
    </script>
  </div>
</div>
<!-- Add Card Modal -->

<!-- jQuery library -->
<script src="assets/js/lib/jquery-3.7.1.min.js"></script>
<!-- bootstrap js -->
<script src="assets/js/lib/bootstrap.min.js"></script>
<!-- main js -->
<script src="assets/js/main.js"></script>
</body>

</html>
