<!-- meta tags and other links -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MyServ: Empowering the Dining Experience</title>
    <link rel="icon" type="image/png" href="assets/images/favicon.png" sizes="16x16" />
    <!-- bootstrap 5  -->
    <link rel="stylesheet" href="assets/css/lib/bootstrap.min.css" />
    <!-- Icon Link  -->
    <link rel="stylesheet" href="assets/css/all.min.css" />
    <link rel="stylesheet" href="assets/css/lib/animate.css" />

    <!-- Main css -->
    <link rel="stylesheet" href="assets/css/main.css" />
</head>

<body>
    <!-- Overlay -->
    <div class="overlay"></div>

<header class="header-section">
  <div class="container">
    <div class="header-wrapper">
      <button class="menu-toggler btn btn-icon">
        <img src="assets/images/icons/menu-01.svg" alt="menu toggle" />
      </button>
      <div class="d-flex flex-column align-items-center justify-content-center">
        <h1 class="menu-title">Item Detail</h1>
        <span class="menu-subtitle">Group Order Code: A51C</span>
      </div>
      <button class="btn btn-icon">
        <img src="assets/images/icons/shopping-cart-01.svg" alt="menu toggle" />
        <span class="float-badge">2</span>
      </button>
    </div>
  </div>
</header>

<nav class="menu-wrapper">
  <div class="logo-area">
    <img src="assets/images/logo.svg" alt="logo" />
  </div>
  <div class="links-area">
    <div class="link-title">Group Ordering <span class="line"></span></div>
    <ul class="menu-links">
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5.84521 13.3357H9.17857M5.84521 9.17108H12.5119" stroke="#212121" stroke-width="1.5" stroke-linecap="round" />
            <path d="M8.34521 18.3333H9.17855" stroke="#212121" stroke-width="1.5" stroke-linecap="round" />
            <path d="M6.25905 18.3333C5.2827 18.3124 4.61603 18.25 3.9702 18.0626C3.09578 17.8335 2.45756 17.0631 2.2702 15.9803C2.0327 14.9599 2.11603 12.4403 2.09515 9.44184C2.09688 7.11563 1.99102 4.88157 2.36602 3.61136C2.59519 3.19489 2.78269 1.67481 5.88686 1.69564C6.4077 1.67481 11.9285 1.63316 12.8035 1.71645C15.7202 1.77893 16.0119 3.27819 16.1785 4.69416C16.2842 5.73531 16.2619 7.40116 16.2619 9.17109M5.8452 1.67481C6.0952 3.02831 6.07436 3.90288 6.99103 4.11111C7.38686 4.17358 8.29127 4.17191 9.26185 4.17358C10.1282 4.17507 11.0119 4.18289 11.4077 4.09029C12.3869 3.86124 12.2827 2.65349 12.5327 1.67481" stroke="#212121" stroke-width="1.5" stroke-linecap="round" />
            <path d="M15.2322 11.9823C14.0871 13.1483 11.8802 15.2307 11.8802 15.3764C11.7022 15.6236 11.5471 16.126 11.443 16.834C11.3122 17.4903 11.1557 18.0626 11.3389 18.2292C11.5222 18.3958 12.2121 18.2553 12.942 18.1043C13.5249 18.0418 14.0662 17.8335 14.3369 17.6253C14.7325 17.2753 17.4182 14.5643 17.7305 14.2103C17.9595 13.898 17.9803 13.3149 17.7804 12.9609C17.668 12.7111 16.9602 12.0447 16.7312 11.8573C16.3147 11.6074 15.7318 11.5658 15.2322 11.9823Z" stroke="#212121" stroke-width="1.5" stroke-linecap="round" />
          </svg>
          <span>Start Group Order</span>
        </a>
      </li>
    </ul>

    <div class="link-title">Info <span class="line"></span></div>
    <ul class="menu-links">
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16.6666 14.9998V8.33312C16.6666 6.76177 16.6666 5.97609 16.1785 5.48794C15.6903 4.99979 14.9046 4.99979 13.3333 4.99979H3.33331V14.9998C3.33331 16.5712 3.33331 17.3568 3.82147 17.845C4.30962 18.3332 5.0953 18.3332 6.66665 18.3332H13.3333C14.9046 18.3332 15.6903 18.3332 16.1785 17.845C16.6666 17.3568 16.6666 16.5712 16.6666 14.9998Z" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M10 9.1665C11.3808 9.1665 12.5 10.2857 12.5 11.6665M10 9.1665C8.61927 9.1665 7.50002 10.2857 7.50002 11.6665M10 9.1665V8.33313M12.5 11.6665H7.50002M12.5 11.6665H13.3334M7.50002 11.6665H6.66669" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M6.66669 14.9998H13.3334" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M3.33331 4.99981L9.48715 2.42136C10.8614 1.84557 11.5485 1.55768 12.0957 1.70433C12.4506 1.79943 12.7644 2.00975 12.9882 2.30261C13.3333 2.75425 13.3333 3.50276 13.3333 4.99981" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>

          <span>Menu Walkthrough</span>
        </a>
      </li>
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.99996 18.3333C14.6023 18.3333 18.3333 14.6024 18.3333 9.99999C18.3333 5.39762 14.6023 1.66666 9.99996 1.66666C5.39759 1.66666 1.66663 5.39762 1.66663 9.99999C1.66663 14.6024 5.39759 18.3333 9.99996 18.3333Z" stroke="#212121" stroke-width="1.5" />
            <path d="M10 6.66666V9.99999L11.6667 11.6667" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>View Hours</span>
        </a>
      </li>
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.5 10V14.1667M2.5 14.1667H4.16667C5.34517 14.1667 5.93443 14.1667 6.30055 14.5328C6.66667 14.8989 6.66667 15.4882 6.66667 16.6667V17.5M2.5 14.1667V17.5" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M3.33337 5.83333L7.76397 3.40287C8.86121 2.80096 9.40987 2.5 10 2.5C10.5902 2.5 11.1389 2.80096 12.2361 3.40287L16.6667 5.83333" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M15 5V8.33333M5 5V8.33333" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M17.5 10V14.1667M17.5 14.1667H15.8334C14.6549 14.1667 14.0656 14.1667 13.6995 14.5328C13.3334 14.8989 13.3334 15.4882 13.3334 16.6667V17.5M17.5 14.1667V17.5" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M5.83337 11.6667H10M10 11.6667H14.1667M10 11.6667V17.5M10 17.5H9.16671M10 17.5H10.8334" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>About Restaurant</span>
        </a>
      </li>
    </ul>

    <div class="link-title">MyServ <span class="line"></span></div>
    <ul class="menu-links">
      <li>
        <a href="">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 15.8333H10.0083" stroke="#212121" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M11.25 1.66669H8.75004C6.78586 1.66669 5.80377 1.66669 5.19357 2.27688C4.58337 2.88708 4.58337 3.86917 4.58337 5.83335V14.1667C4.58337 16.1309 4.58337 17.1129 5.19357 17.7232C5.80377 18.3334 6.78586 18.3334 8.75004 18.3334H11.25C13.2142 18.3334 14.1963 18.3334 14.8065 17.7232C15.4167 17.1129 15.4167 16.1309 15.4167 14.1667V5.83335C15.4167 3.86917 15.4167 2.88708 14.8065 2.27688C14.1963 1.66669 13.2142 1.66669 11.25 1.66669Z" stroke="#212121" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>About MyServ</span>
        </a>
      </li>
    </ul>
  </div>

  <a href="" class="btn btn-primary btn-lg d-flex login-btn">Login</a>
</nav>

<main class="main-wrapper">
  <div class="item-detail-wrapper">
    <img src="assets/images/thumbs/img11.png" alt="" class="w-100 main-detail-image" />
    <div class="item-detail-content">
      <div class="d-flex justify-content-between">
        <h2 class="title">Deluxe Cheeseburger</h2>
        <div class="price">$14.00</div>
      </div>
      <p class="mt-3">Juicy Angus patty, Romaine Lettuce, Raw Onion, Tomato, on a fresh Sesame Bun topped with Thousand Island dressing</p>

      <div class="detail-title-wrapper mb-2">
        <div class="icon"><img src="assets/images/icons/temperature.svg" alt="icon" /></div>
        <h3 class="detail-title">Temperature <span>(Chef Recommends Medium)</span></h3>
      </div>
      <p class="required-text mb-4"><img src="assets/images/icons/information-circle.svg" alt="icon" /> Required - Select 1</p>
      <label class="option">
        <label for="rare">Medium Rare</label>
        <input type="radio" name="doneness" id="rare" />
      </label>
      <label class="option">
        <label for="medium">Medium</label>
        <input type="radio" name="doneness" id="medium" checked />
      </label>
      <label class="option">
        <label for="medwell">Medium Well</label>
        <input type="radio" name="doneness" id="medwell" />
      </label>
      <label class="option">
        <label for="well">Well</label>
        <input type="radio" name="doneness" id="well" />
      </label>

      <div class="detail-title-wrapper mb-4 mt-4 pt-2">
        <div class="icon"><img src="assets/images/icons/serving-food.svg" alt="icon" /></div>
        <h3 class="detail-title">Burger Selections</h3>
      </div>
      <div class="options-title mb-3">Options <span class="line"></span></div>
      <div class="selection-item">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckAddPatty" />
            <label class="form-check-label" for="flexCheckAddPatty">Add Patty</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter">
            <button class="btn p-0 border-0 minus"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <input type="text" class="value" value="1" readonly />
            <button class="btn p-0 border-0 plus"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price">+$1.00</div>
        </div>
      </div>

      <div class="selection-item">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckAddBacon" />
            <label class="form-check-label" for="flexCheckAddBacon">Add Bacon</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter">
            <button class="btn p-0 border-0 minus"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <input type="text" class="value" value="0" readonly />
            <button class="btn p-0 border-0 plus"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price">+$1.00</div>
        </div>
      </div>

      <div class="selection-item">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckAddEgg" />
            <label class="form-check-label" for="flexCheckAddEgg">Add Egg</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter">
            <button class="btn p-0 border-0 minus"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <input type="text" class="value" value="0" readonly />
            <button class="btn p-0 border-0 plus"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price">+$1.00</div>
        </div>
      </div>

      <div class="options-title mb-3 mt-4">Toppings <span class="line"></span></div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckLettuce" />
            <label class="form-check-label" for="flexCheckLettuce">Lettuce</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter text-shift-counter">
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <span class="value">None</span>
            <span class="value">Light</span>
            <span class="value">Standard</span>
            <span class="value">Extra</span>
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price" style="min-width: 50px">+$1.00</div>
        </div>
      </div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckTomato" />
            <label class="form-check-label" for="flexCheckTomato">Tomato</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter text-shift-counter">
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <span class="value">None</span>
            <span class="value">Light</span>
            <span class="value">Standard</span>
            <span class="value">Extra</span>
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price" style="min-width: 50px">+$1.00</div>
        </div>
      </div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckOnion" />
            <label class="form-check-label" for="flexCheckOnion">Onion</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter text-shift-counter">
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <span class="value">None</span>
            <span class="value">Light</span>
            <span class="value">Standard</span>
            <span class="value">Extra</span>
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price" style="min-width: 50px">+$1.00</div>
        </div>
      </div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckThousandIsland" />
            <label class="form-check-label" for="flexCheckThousandIsland">Thousand Island Dressing</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter text-shift-counter">
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <span class="value">None</span>
            <span class="value">Light</span>
            <span class="value">Standard</span>
            <span class="value">Extra</span>
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price" style="min-width: 50px">+$1.00</div>
        </div>
      </div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckKetchup1" />
            <label class="form-check-label" for="flexCheckKetchup1">Ketchup</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter text-shift-counter">
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <span class="value">None</span>
            <span class="value">Light</span>
            <span class="value">Standard</span>
            <span class="value">Extra</span>
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price" style="min-width: 50px">+$1.00</div>
        </div>
      </div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckKetchup2" />
            <label class="form-check-label" for="flexCheckKetchup2">Mustard</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter text-shift-counter">
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <span class="value selected">None</span>
            <span class="value">Light</span>
            <span class="value">Standard</span>
            <span class="value">Extra</span>
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price" style="min-width: 50px">+$1.00</div>
        </div>
      </div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckPickle" />
            <label class="form-check-label" for="flexCheckPickle">Pickle</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="counter text-shift-counter">
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/minus.svg" alt="icon" /></button>
            <span class="value">None</span>
            <span class="value">Light</span>
            <span class="value">Standard</span>
            <span class="value">Extra</span>
            <button class="btn p-0 border-0"><img width="18" src="assets/images/icons/plus.svg" alt="icon" /></button>
          </div>
          <div class="item-price" style="min-width: 50px">+$1.00</div>
        </div>
      </div>

      <div class="options-title mb-3 mt-4">Sides <span class="line"></span></div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckFries" />
            <label class="form-check-label" for="flexCheckFries">Fries</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="item-price" style="min-width: 50px">Included</div>
        </div>
      </div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckSweetFries" />
            <label class="form-check-label" for="flexCheckSweetFries">Sweet Potato Fries</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="item-price" style="min-width: 50px">+$4.00</div>
        </div>
      </div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckTots" />
            <label class="form-check-label" for="flexCheckTots">Tots</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="item-price" style="min-width: 50px">+$5.00</div>
        </div>
      </div>

      <div class="selection-item inactive">
        <div class="selection-item__left">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="flexCheckSweetTots" />
            <label class="form-check-label" for="flexCheckSweetTots">Sweet Potato Tots</label>
          </div>
        </div>
        <div class="selection-item__right">
          <div class="item-price" style="min-width: 50px">+$6.00</div>
        </div>
      </div>

      <div class="options-title mb-3 mt-4">Special instructions <span class="line"></span></div>
      <div class="form-group">
        <textarea name="" id="" class="form-control enter-instructions" placeholder="Enter instructions...." rows="4"></textarea>
      </div>
    </div>
  </div>
</main>

<div class="container mt-auto bottom-button-wrapper">
  <div class="d-flex flex-column gap-2">
    <button type="button" class="btn btn-md btn-primary add-to-cart-btn" data-price="14.00">
      Add to Cart
      <div class="counter">
        <span class="btn bg-transparent p-0 border-0 minus"><img width="18" src="assets/images/icons/minus-white.svg" alt="icon" /></span>
        <input type="text" class="value" value="1" />
        <span class="btn bg-transparent p-0 border-0 plus"><img width="18" src="assets/images/icons/plus-white.svg" alt="icon" /></span>
      </div>
      <span class="cart-total">$15.00</span>
    </button>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Utility: safely select element(s)
    const $ = (selector, context = document) => context.querySelector(selector);
    const $$ = (selector, context = document) => Array.from(context.querySelectorAll(selector));

    // Parse price from string like "$14.00" -> 14
    function parsePrice(priceStr) {
      return parseFloat(priceStr.replace(/[^0-9.-]+/g, "")) || 0;
    }

    // Format number to price string "$14.00"
    function formatPrice(num) {
      return `$${num.toFixed(2)}`;
    }

    // Elements
    const basePriceEl = $(".price"); // $14.00
    const addToCartBtn = $(".add-to-cart-btn");
    const addToCartQuantityInput = $(".add-to-cart-btn .value");
    const cartTotalEl = $(".cart-total");
    const itemDetailWrapper = $(".item-detail-wrapper");

    if (!basePriceEl || !addToCartBtn || !addToCartQuantityInput || !cartTotalEl || !itemDetailWrapper) {
      // Required elements missing, do nothing to avoid errors
      return;
    }

    const basePrice = parsePrice(basePriceEl.textContent);

    // Store info about each selection item for price calculation
    // We will process 3 types:
    // 1) Checkboxes with counters (Add Patty, Add Bacon, Add Egg)
    // 2) Toppings with checkbox + text-shift counter (None, Light, Standard, Extra)
    // 3) Sides with checkbox only and fixed price or Included

    // Step 1: Handle checkbox + numeric counter selections
    const selectionItemsWithCounter = $$(".selection-item").filter((item) => {
      return item.querySelector(".form-check-input") && item.querySelector(".counter input.value");
    });

    // Step 2: Handle toppings with checkbox + text-shift counters
    const toppingsItems = $$(".selection-item.inactive").filter((item) => {
      // Only toppings have .text-shift-counter inside
      return item.querySelector(".counter.text-shift-counter");
    });

    // Step 3: Handle sides (checkbox + fixed price text, no counter)
    const sidesItems = $$(".selection-item.inactive").filter((item) => {
      // Check if it doesn't have .counter, but has .item-price
      return !item.querySelector(".counter") && item.querySelector(".item-price");
    });

    // Prices per item are assumed from the .item-price text
    // For toppings, price per level (assumed all +$1.00 for any level except None)
    // For add-ons, price per unit from .item-price text (usually +$1.00)
    // For sides, price from .item-price text or "Included" means zero cost

    // === Helper Functions ===

    // Enable or disable plus/minus buttons and input readonly for checkbox items
    function setCounterEnabled(item, enabled) {
      const minusBtn = item.querySelector(".counter .minus");
      const plusBtn = item.querySelector(".counter .plus");
      const valueInput = item.querySelector(".counter input.value");

      if (!minusBtn || !plusBtn || !valueInput) return;

      if (enabled) {
        minusBtn.disabled = false;
        plusBtn.disabled = false;
        valueInput.readOnly = true;
      } else {
        minusBtn.disabled = true;
        plusBtn.disabled = true;
        valueInput.readOnly = true;
        valueInput.value = "0";
      }
    }

    // Calculate the quantity of toppings selected (0 for None, 1 for Light, 2 Standard, 3 Extra)
    function getToppingQuantity(item) {
      const counter = item.querySelector(".counter.text-shift-counter");
      if (!counter) return 0;

      // Find selected span with class "selected", fallback to last span (Extra)
      const selectedSpan = counter.querySelector(".value.selected");
      let index = 0; // default None
      if (selectedSpan) {
        const spans = Array.from(counter.querySelectorAll(".value"));
        index = spans.indexOf(selectedSpan);
        if (index === -1) index = 0;
      } else {
        // No selected, assume None
        index = 0;
      }
      return index; // 0 to 3
    }

    // Update toppings selected class for plus/minus buttons
    function updateToppingSelected(item, newIndex) {
      const counter = item.querySelector(".counter.text-shift-counter");
      if (!counter) return;
      const spans = Array.from(counter.querySelectorAll(".value"));
      spans.forEach((span, i) => {
        if (i === newIndex) span.classList.add("selected");
        else span.classList.remove("selected");
      });
    }

    // Disable/enable toppings counters based on checkbox
    function setToppingEnabled(item, enabled) {
      const minusBtn = item.querySelector(".counter .btn:first-child");
      const plusBtn = item.querySelector(".counter .btn:last-child");
      if (!minusBtn || !plusBtn) return;

      if (enabled) {
        minusBtn.disabled = false;
        plusBtn.disabled = false;
        // If current selected is None (0), switch to Standard (2) by default
        const qty = getToppingQuantity(item);
        if (qty === 0) updateToppingSelected(item, 2);
      } else {
        minusBtn.disabled = true;
        plusBtn.disabled = true;
        updateToppingSelected(item, 0);
      }
    }

    // Parse price from text like "+$1.00"
    function parseAddonPrice(text) {
      return parseFloat(text.replace(/[^0-9.-]+/g, "")) || 0;
    }

    // Calculate total price from selections
    function calculateTotal() {
      let total = basePrice;

      // 1) Add-ons with checkbox + numeric counter
      selectionItemsWithCounter.forEach((item) => {
        const checkbox = item.querySelector(".form-check-input");
        const valueInput = item.querySelector(".counter input.value");
        const priceText = item.querySelector(".item-price")?.textContent || "";
        const pricePerUnit = parseAddonPrice(priceText);

        if (checkbox?.checked && valueInput) {
          const quantity = parseInt(valueInput.value) || 0;
          total += quantity * pricePerUnit;
        }
      });

      // 2) Toppings with checkbox + text-shift counter
      toppingsItems.forEach((item) => {
        // const checkbox = item.querySelector(".form-check-input");
        // ignore checkbox.checked here
        const selectedText = item.querySelector(".counter span.value.selected")?.textContent.trim();
        console.log(!selectedText === "None");

        const level = getToppingQuantity(item);
        if (level > 0) {
          const priceText = item.querySelector(".item-price")?.textContent || "";
          const price = parseAddonPrice(priceText);
          if (!isNaN(price)) {
            total += price;
          }
        }
      });

      // 3) Sides with checkbox only (some have Included)
      sidesItems.forEach((item) => {
        const checkbox = item.querySelector(".form-check-input");
        const priceText = item.querySelector(".item-price")?.textContent || "";
        let price = 0;
        if (!priceText.toLowerCase().includes("included")) {
          price = parseAddonPrice(priceText);
        }
        if (checkbox?.checked) {
          total += price;
        }
      });

      // 4) Multiply by Add to Cart quantity
      const mainQty = parseInt(addToCartQuantityInput.value) || 1;
      total *= mainQty;

      // Update cart total price text
      cartTotalEl.textContent = formatPrice(total);
    }

    // === Event Listeners ===

    // 1) Add to Cart quantity plus/minus buttons
    const addToCartMinus = $(".add-to-cart-btn .minus");
    const addToCartPlus = $(".add-to-cart-btn .plus");

    if (addToCartMinus && addToCartPlus && addToCartQuantityInput) {
      addToCartMinus.addEventListener("click", () => {
        let val = parseInt(addToCartQuantityInput.value) || 1;
        if (val > 1);
        addToCartQuantityInput.value = val;
        calculateTotal();
      });

      addToCartPlus.addEventListener("click", () => {
        let val = parseInt(addToCartQuantityInput.value) || 1;
        // val++;
        addToCartQuantityInput.value = val;
        calculateTotal();
      });
    }

    // 2) For add-ons with checkbox + numeric counters
    selectionItemsWithCounter.forEach((item) => {
      const checkbox = item.querySelector(".form-check-input");
      const minusBtn = item.querySelector(".counter .minus");
      const plusBtn = item.querySelector(".counter .plus");
      const valueInput = item.querySelector(".counter input.value");

      if (!checkbox || !minusBtn || !plusBtn || !valueInput) return;

      // Enable or disable counter based on checkbox checked state
      function updateCounterState() {
        setCounterEnabled(item, checkbox.checked);
      }
      updateCounterState();

      checkbox.addEventListener("change", () => {
        updateCounterState();
        calculateTotal();
      });

      minusBtn.addEventListener("click", () => {
        let val = parseInt(valueInput.value) || 0;
        if (val > 0) {
          // val--;
          // valueInput.value = val;
          calculateTotal();
        }
      });

      plusBtn.addEventListener("click", () => {
        let val = parseInt(valueInput.value) || 0;
        // val++;
        // valueInput.value = val;
        calculateTotal();
      });
    });

    // 3) Toppings with checkbox + text-shift counters
    toppingsItems.forEach((item) => {
      const checkbox = item.querySelector(".form-check-input");
      const minusBtn = item.querySelector(".counter .btn:first-child");
      const plusBtn = item.querySelector(".counter .btn:last-child");

      if (!checkbox || !minusBtn || !plusBtn) return;

      // Enable or disable topping counters based on checkbox
      function updateToppingState() {
        setToppingEnabled(item, checkbox.checked);
      }
      updateToppingState();

      checkbox.addEventListener("change", () => {
        updateToppingState();
        calculateTotal();
      });

      minusBtn.addEventListener("click", () => {
        let currentLevel = getToppingQuantity(item);
        if (currentLevel > 0) {
          updateToppingSelected(item, currentLevel - 1);
          calculateTotal();
        }
      });

      plusBtn.addEventListener("click", () => {
        let currentLevel = getToppingQuantity(item);
        if (currentLevel < 3) {
          updateToppingSelected(item, currentLevel + 1);
          calculateTotal();
        }
      });
    });

    // 4) Sides checkboxes (price or included)
    sidesItems.forEach((item) => {
      const checkbox = item.querySelector(".form-check-input");
      if (!checkbox) return;
      checkbox.addEventListener("change", calculateTotal);
    });

    // 5) Radio buttons for temperature don't affect price, no need to listen

    // Initial calculation on load
    calculateTotal();
  });
</script>

<!-- jQuery library -->
<script src="assets/js/lib/jquery-3.7.1.min.js"></script>
<!-- bootstrap js -->
<script src="assets/js/lib/bootstrap.min.js"></script>
<!-- main js -->
<script src="assets/js/main.js"></script>
</body>

</html>
